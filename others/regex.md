# Regular Expressions 正則運算式

## Learn Regular Expressions In 20 Minutes

1. <https://www.youtube.com/watch?v=rhzKDrUiJVk>
2. 這個app可以用選項來產生正則運算式<https://regexr.com/>
3. `/e+/g`：
   1. 代表的是找的字裡面有e或是ee或是eee，也就是連續的e
   2. g代表global，整篇文章，沒有的話只有搜尋第一個
4. `/e+a/g`：代表找出所有e後面有a的，而且包括連續的e，也就是eea，三個字母都會被選起來。
5. `/e+a?/g`：代表找出所有e或連續e，而a可有可無，如果有a就會被連續的被選起來。
6. `/ea?/g`：代表找出所有e，或是ea，因為a可有可無。
7. `/ea*/g`：代表找出所有e，或是ea，或是eaa，或是eaaaa，有點像是+和?的綜合體。
8. `/\./g`：搜尋出所有的句點，因為句點是特殊符號，所以要加個反斜線。
9. `/t../g`：
   1. 幾個句點代表幾個字母，例如這是t和後面兩個字母的意思。
   2. 但是注意，不換行選擇。
   3. 如果後面換行了，也就是後面不夠兩個字了，就不會被選取。
   4. 例如以下，換行了就不會選擇`t.i`：

      ```text
      street.
      it was search
      ```

   5. 如果用`/t../gm`上面換行的情況也會選擇`t.i`，m代表multiline，我測試不成功。
   6. `/.t/g`：這就是選擇了t和t前面一個字母。
10. `/\w/g`：選取letter，不包含space，不包含特殊符號。
11. `/\W/g`：選取不是字母的符號。
12. `/\s/g`：選取space。
13. `/\S/g`：選取space以外的字元。
14. `/\w{3}/g`：代表3個連續的letter會被選起來。
15. `/\w{3,}/g`：代表3個以上連續的letter會被選起來。
16. `/\w{3,4}/g`：
    1. 代表3個連續的letter，或4個連續letter會被選起來。
    2. 完整意思是「最少出現3次，最多出現4次」。
17. `/[fc]at/g`：代表f或c開頭，後面接at的，都要被選起來，例如fat和cat。
18. `/[a-z]at/g`：代表a-z之間開頭(也就是所有小寫字母)，後面接at的，都要被選起來，例如fat、cat、xat。
19. 數字：
    1. `/[0-9]at/g`：代表數字後面接at的，都要被選起來，例如1at、2at。
    2. `/\dat/g`：會得到和上面一樣的結果，`\d`代表數字。
20. group：
    1. `/(e|E)at/g`：
       1. 和`/[eE]at/g`一樣，eat或是Eat都會被選取。
       2. ()是group起來。
       3. |是或的意思。
    2. `(e|E|a){2,3}/g`：
       1. 代表e或E或a中任一個有出現，而且連續出現2次或是3次，都要選取。
       2. 例如：ee、eE、eeE、eEa、aea、aee
    3. `/(t|e|r){2,3}\./g`：
       1. 代表找出t或e或r有出現，而且連續出現2次或3次，之後又出現句點的字串。
       2. 這邊`{2,3}`是用來限制前面的(t|e|r)的結果，不影響後面`\.`的結果。
    4. `/(re){2,3}/g`：
       1. 代表的是re連續出現2次或是3次，例如`rere`或是`rerere`。
       2. 但是`/re{2,3}/g`：代表的是`ree`或是`ree`，也就是e連續出現2次或是3次。
21. `^`代表的是開頭：
    1. `/^I/g`：**整篇文字**的最開頭是大寫`I`的話，`I`會被選取，例如：`It is a dog`的`I`。
    2. `/^I/gm`：
       1. **每一行**的開頭是大寫`I`的話，`I`會被選取。
       2. `m`代表multiline
22. `$`代表的是結尾：
    1. `/\.$/g`：**整個文字**的最結尾是`.`，都會被選取，例如：`It is a dog.`的`.`。
    2. `/\.$/gm`：**每一行**的最結尾是`.`的，`.`都會被選取。
23. `/(?<=[tT]he)./g`
    1. 意思是在`the`或是`The`之後的那一個字
    2. `(?<=)`代表positive lookbehind
    3. 完整意思是「找出`the`或是`The`，由最後一個字開始算，不包含`the`或是`The`本身」，這時候小數點在後，就會是`e`結束之後的後一個字母。
    4. 可以參考前面談到的`.`代表的是一個字
    5. 例如`The dog.`選到的就是那個中間的空白字串
24. `/.(?=[tT]he)/g`
    1. 意思是在`the`或是`The`之前的那一個字
    2. `(?=)`代表positive lookahead
    3. 完整意思是「找出`the`或是`The`，由第一個字開始算，不包含`the`或是`The`本身」，這時候小數點在前，就會是t或T之前的字母了。
    4. 例如`Look at the dog.`選到的就是`at`和`the`中間的空白字串。
25. `!`：相反
    1. `/(?<![tT]he)./g`
       1. 意思是`the`或是`The`之後的那一個字不選，其它都選。
       2. 和``/(?<=[tT]he)./g`相反
       3. `(?<!)`代表的是negative lookbehind
       4. 例如`The dog.`中間的空白字串以外都被選了。
    2. `/.(?![tT]he)/g`
       1. 意思是`the`或是`The`之前的那一個字不選，其它都選。
       2. 和``/(?=[tT]he)./g`相反
       3. `(?!)`代表的是negative lookahead
       4. 例如`Look at the dog.`，就是`at`和`the`中間的空白字串以外都被選了。
26. 不實用：
    1. `/.(?<=[tT]he)/g`
       1. 其實和`/(?<=[tT]h)e/g`結果一樣，應該要用`/(?<=[tT]h)e/g`比較簡短，也比較好理解。
       2. 更簡單說，就是`the`或是`The`的最後一個字母。
       3. 完整意思是「找出`the`或是`The`，由最後一個字開始算，不包含`the`或是`The`本身」，這時候小數點在前，就會是`e`結束之後的前一個字母，就會剛好是`e`本身。
    2. `/(?=[tT]he)./g`
       1. 其實和`/[tT](?=he)/g`結果是一樣的，應該要用`/[tT](?=he)/g`比較簡短，也比較好理解。
       2. 更簡單說，就是`the`或是`The`的第一個字母。
       3. 完整意思是「找出`the`或是`The`，由第一個字開始算，不包含`the`或是`The`本身」，這時候小數點在後，就會是`t`或`T`開始的時候開始算的第一個字母，就剛好是`t`或`T`本身。
27. 練習：
    1. 寫出符合以下格式的regex：

         ```text
         0921333788
         0921-333-788
         (0921)333788
         0921 333 788
         ```

    2. 解答：

         ```regex
         /(\(?)(\d{4})[\)\s\-]?(\d{3})[\s\-]?(\d{3})/g
         ```

    3. 說明：
       1. `(\(?)`：左括號可有可無
       2. `(\d{4})`：4個數字
       3. `[\)\s\-]?`：左括號、空白、dash其中之一，或是沒有也可以
       4. `(\d{3})`：三個數字
       5. `[\s\-]?`：空白或dash其中之一，或是沒有也可以
